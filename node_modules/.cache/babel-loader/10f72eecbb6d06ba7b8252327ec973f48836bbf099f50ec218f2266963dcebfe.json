{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{useDispatchCart,useCart}from'./ContextReducer';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){let navigate=useNavigate();let dispatch=useDispatchCart();let data=useCart();let options=props.options;let prices=Object.keys(options);const priceRef=useRef();const[qty,setQty]=useState(1);const[size,setSize]=useState('');const handleQty=e=>{console.log(e.target.value);setQty(e.target.value);};const handleOptions=e=>{setSize(e.target.value);};const handleAddtoCart=async()=>{if(!localStorage.getItem(\"authToken\")&&!localStorage.getItem(\"userEmail\")){navigate(\"/login\");}// console.log(props.foodItem.name);\nlet food=[];for(const item of data){if(item.id===props.foodItem._id){food=item;break;}}// console.log(food)\n// console.log(new Date())\nif(food!=[]){if(food.size===size){await dispatch({type:\"UPDATE\",id:props.foodItem._id,price:finalPrice,qty:qty});return;}else if(food.size!=size){await dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size,img:props.foodItem.img});return;}return;}await dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,img:props.foodItem.img,price:finalPrice,qty:qty,size:size});console.log(data);};let finalPrice=qty*parseInt(options[size]);useEffect(()=>{setSize(priceRef.current.value);},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",style:{\"width\":\"19rem\",\"height\":\"470px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:props.foodItem.img,className:\"card-img-top\",style:{\"height\":\"180px\"},alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.foodItem.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:props.foodItem.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100  bg-success rounded\",onChange:handleQty,children:Array.from(Array(10),(e,i)=>{return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100  bg-success rounded\",ref:priceRef,onChange:handleOptions,children:prices.map(item=>{return/*#__PURE__*/_jsx(\"option\",{value:item,children:item},item);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-inline h-100 fs-5\",children:[\"Rs. \",finalPrice,\"\\\\-\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:'btn btn-success justify-center ms-2',onClick:handleAddtoCart,children:\"Add to Cart\"})]})]})]})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useDispatchCart","useCart","useNavigate","jsx","_jsx","jsxs","_jsxs","Card","props","navigate","dispatch","data","options","prices","Object","keys","priceRef","qty","setQty","size","setSize","handleQty","e","console","log","target","value","handleOptions","handleAddtoCart","localStorage","getItem","food","item","id","foodItem","_id","type","price","finalPrice","name","img","parseInt","current","children","className","style","src","alt","description","onChange","Array","from","i","ref","map","onClick"],"sources":["F:/foodapp/foodapp/foodApp_MERN/src/components/Card.js"],"sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\r\nimport { useDispatchCart, useCart } from './ContextReducer';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Card(props) {\r\n\r\n  let navigate = useNavigate();\r\n  let dispatch = useDispatchCart();\r\n  let data = useCart();\r\n  let options = props.options;\r\n  let prices = Object.keys(options);\r\n  const priceRef = useRef();\r\n\r\n  const [qty, setQty] = useState(1);\r\n  const [size, setSize] = useState('');\r\n\r\n  \r\n  const handleQty = (e) => {\r\n    console.log(e.target.value);\r\n    setQty(e.target.value);\r\n  }\r\n  const handleOptions = (e) => {\r\n    setSize(e.target.value);\r\n  }\r\n\r\n  const handleAddtoCart = async() =>{\r\n    if (!localStorage.getItem(\"authToken\") && !localStorage.getItem(\"userEmail\")) {\r\n      navigate(\"/login\")\r\n    }\r\n    // console.log(props.foodItem.name);\r\n    let food = []\r\n    for (const item of data) { \r\n      if (item.id === props.foodItem._id) {\r\n        food = item;\r\n\r\n        break;\r\n      }\r\n    }\r\n    // console.log(food)\r\n    // console.log(new Date())\r\n    if (food != []) {\r\n      if (food.size === size) {\r\n        await dispatch({ type: \"UPDATE\", id: props.foodItem._id, price: finalPrice, qty: qty })\r\n        return\r\n      }\r\n      else if (food.size != size) {\r\n        await dispatch({ type: \"ADD\", id: props.foodItem._id, name: props.foodItem.name, price: finalPrice, qty: qty, size: size,img: props.foodItem.img })\r\n        return\r\n      }\r\n      return\r\n    }\r\n\r\n    await dispatch({type:\"ADD\", id:props.foodItem._id, name:props.foodItem.name,img:props.foodItem.img, price:finalPrice, qty:qty, size:size})\r\n    console.log(data);\r\n  }\r\n  let finalPrice = qty * parseInt(options[size]);\r\n  useEffect(() => {\r\n    setSize(priceRef.current.value);\r\n  }, [])\r\n  \r\n\r\n  return (\r\n    <div>\r\n      <div className=\"card mt-3\" style={{ \"width\": \"19rem\", \"height\": \"470px\" }}>\r\n        <img src={props.foodItem.img} className=\"card-img-top\" style={{ \"height\": \"180px\" }} alt=\"...\" />\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">{props.foodItem.name}</h5>\r\n          <p className=\"card-text\">{props.foodItem.description}</p>\r\n          <div className='container w-100'>\r\n            <select className='m-2 h-100  bg-success rounded'  onChange={handleQty}>\r\n              {Array.from(Array(10), (e, i) => {\r\n                return (\r\n                  <option key={i + 1} value={i + 1}>{i + 1}</option>\r\n                )\r\n              })}\r\n            </select>\r\n\r\n            <select className='m-2 h-100  bg-success rounded' ref={priceRef}  onChange={handleOptions}>\r\n              {\r\n                prices.map((item) => { return (<option key={item} value={item}>{item}</option>) })\r\n              }\r\n            </select>\r\n\r\n            <div className='d-inline h-100 fs-5'>\r\n              Rs. {finalPrice}\\-\r\n            </div>\r\n            <hr></hr>\r\n            <button className={'btn btn-success justify-center ms-2'} onClick={handleAddtoCart}>Add to Cart</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}